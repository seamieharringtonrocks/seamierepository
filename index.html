<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Christmas Gift Hunt - 10 Levels of Timed Chaos</title>
<style>
  body {
    margin: 0;
    background: #000;
    color: #fff;
    font-family: Arial, sans-serif;
    text-align: center;
  }
  h1 { margin: 20px; font-size: 2.5em; }
  #ui {
    padding: 10px;
    font-size: 1.4em;
    background: rgba(0,0,0,0.6);
    position: absolute;
    top: 0; left: 0; right: 0;
    display: flex;
    justify-content: center;
    gap: 30px;
    flex-wrap: wrap;
  }
  canvas {
    display: block;
    margin: 0 auto;
    border: 4px solid #0f0;
    border-radius: 12px;
    box-shadow: 0 0 30px #0f0;
  }
  #message {
    margin: 20px;
    font-size: 2em;
    font-weight: bold;
    min-height: 60px;
  }
  button {
    padding: 12px 24px;
    font-size: 1.2em;
    background: #d32f2f;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
  }
  button:hover { background: #ff1744; }
</style>
</head>
<body>
  <h1>Christmas Gift Hunt</h1>
  <div id="ui">
    <div>Level: <span id="level">1</span>/10</div>
    <div>Gifts Found: <span id="found">0</span>/20</div>
    <div>Time Left: <span id="timer">90</span>s</div>
  </div>
  <canvas id="canvas" width="1000" height="600"></canvas>
  <div id="message">Click Start to begin the holiday madness!</div>
  <button onclick="startGame()">Start Game</button>

<script>
// Everything is 100% self-contained â€” no external images, no links, no server needed.
// Works perfectly on GitHub Pages â€” just upload this single index.html file.

const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
const giftEmojis = ['ğŸ','ğŸ§¦','ğŸ§¸','ğŸ“š','ğŸ®','ğŸš€','ğŸ§£','ğŸ§','ğŸ«','ğŸ§©','ğŸ¤–','ğŸš','ğŸ–ï¸','ğŸ¨','ğŸ¥','ğŸ¸','ğŸ§¤','ğŸ“±','âŒš','ğŸ§­'];

let level = 1;
let found = 0;
let timer = 90;
let timerInterval;
let animationFrame;
let gifts = [];
let snowflakes = [];
let message = document.getElementById('message');

const levelNames = [
  "", // index 0 unused
  "North Pole Classic",
  "New York Rooftop Snow",
  "German Christmas Market",
  "Swedish Lucia Night",
  "Mexican Posada Party",
  "Australian Beach Christmas",
  "Brazilian Tropical NoÃ«l",
  "Japanese Strawberry Cake",
  "Philippine Parol Lanterns",
  "Global Holiday Finale"
];

function startGame() {
  level = 1;
  message.textContent = "Find the 20 gifts before time runs out!";
  document.querySelector('button').style.display = 'none';
  startLevel();
}

function startLevel() {
  found = 0;
  document.getElementById('found').textContent = '0';
  document.getElementById('level').textContent = level + " â€” " + levelNames[level];

  // Timer gets 5 seconds harder each level (90 â†’ 45s by level 10)
  timer = 95 - (level * 5);
  if (timer < 30) timer = 30;

  document.getElementById('timer').textContent = timer;

  // Number of hidden Grinches increases with level (max 8)
  const grinchCount = Math.min(level + 1, 8);

  gifts = [];
  for (let i = 0; i < 20 + grinchCount; i++) {  // extra positions for Grinches
    gifts.push({
      x: 100 + Math.random() * 800,
      y: 100 + Math.random() * 400,
      emoji: giftEmojis[Math.floor(Math.random() * giftEmojis.length)],
      isGrinch: i < grinchCount,
      collected: false
    });
  }

  // Shuffle so Grinches are truly hidden among gifts
  gifts.sort(() => Math.random() - 0.5);

  // Snowflakes (disabled on beach levels)
  snowflakes = [];
  if (level !== 6 && level !== 7) {
    for (let i = 0; i < 120; i++) {
      snowflakes.push({
        x: Math.random() * 1000,
        y: Math.random() * 600,
        speed: 0.5 + Math.random() * 1.5,
        size: 10 + Math.random() * 20
      });
    }
  }

  clearInterval(timerInterval);
  timerInterval = setInterval(() => {
    timer--;
    document.getElementById('timer').textContent = timer;
    if (timer <= 0) {
      clearInterval(timerInterval);
      message.textContent = "Time's Up! Click canvas to retry level.";
    }
  }, 1000);

  draw();
  loop();
}

function drawBackground() {
  // Sky gradient changes per level theme
  const grad = ctx.createLinearGradient(0, 0, 0, 600);
  if (level === 6 || level === 7) {
    // Beach / Tropical
    grad.addColorStop(0, '#87CEEB');
    grad.addColorStop(1, '#FFD700');
  } else if (level === 5 || level === 7) {
    // Mexico / Brazil vibrant
    grad.addColorStop(0, '#FF1493');
    grad.addColorStop(1, '#00CED1');
  } else if (level === 1) {
    grad.addColorStop(0, '#000033');
    grad.addColorStop(1, '#0f3066');
  } else {
    grad.addColorStop(0, '#001133');
    grad.addColorStop(1, '#003366');
  }
  ctx.fillStyle = grad;
  ctx.fillRect(0, 0, 1000, 600);

  // Ground
  ctx.fillStyle = (level === 6 || level === 7) ? '#FFE4B5' : '#ffffff';
  ctx.fillRect(0, 450, 1000, 150);

  // Level-specific centerpiece
  if (level === 6) {
    // Aussie beach â€” big yellow sun
    ctx.fillStyle = '#FFFF00';
    ctx.beginPath();
    ctx.arc(800, 120, 80, 0, Math.PI * 2);
    ctx.fill();
  } else if (level === 9) {
    // Philippine parol lanterns
    for (let i = 0; i < 8; i++) {
      ctx.fillStyle = ['#FF0000','#FFFF00','#00FF00','#0000FF'][i%4];
      ctx.font = '80px serif';
      ctx.fillText('âœ¨', 150 + i * 100, 200);
    }
  } else {
    // Traditional Christmas tree (bigger on early levels)
    ctx.fillStyle = '#0A5';
    const treeHeight = 280 - level * 10;
    for (let i = 0; i < 4; i++) {
      ctx.beginPath();
      ctx.moveTo(500, 100 + i * 70);
      ctx.lineTo(500 - (200 - i * 30), 220 + i * 70);
      ctx.lineTo(500 + (200 - i * 30), 220 + i * 70);
      ctx.closePath();
      ctx.fill();
    }
    ctx.fillStyle = '#FF0';
    ctx.fillText('â­', 480, 90);
  }
}

function draw() {
  ctx.clearRect(0, 0, 1000, 600);
  drawBackground();

  // Falling snow (or sparkles on tropical levels)
  snowflakes.forEach(s => {
    ctx.font = s.size + 'px serif';
    ctx.fillStyle = 'rgba(255,255,255,0.8)';
    ctx.fillText('â„', s.x, s.y);
    s.y += s.speed;
    if (s.y > 600) s.y = -20;
  });

  // Draw gifts
  gifts.forEach(g => {
    if (!g.collected) {
      ctx.font = '60px serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';

      // Grinch gifts have a subtle pulsing green bezel as hint
      if (g.isGrinch) {
        const pulse = 30 + Math.sin(Date.now() / 200) * 10;
        ctx.strokeStyle = '#00ff00';
        ctx.lineWidth = 6;
        ctx.beginPath();
        ctx.arc(g.x, g.y, pulse, 0, Math.PI * 2);
        ctx.stroke();
      }

      ctx.fillText(g.emoji, g.x, g.y);
    }
  });
}

function loop() {
  draw();
  animationFrame = requestAnimationFrame(loop);
}

canvas.addEventListener('click', (e) => {
  if (timer <= 0) {
    startLevel(); // retry on click when time's up
    return;
  }

  const rect = canvas.getBoundingClientRect();
  const mx = e.clientX - rect.left;
  const my = e.clientY - rect.top;

  for (const g of gifts) {
    if (!g.collected && Math.hypot(mx - g.x, my - g.y) < 50) {
      if (g.isGrinch) {
        // GRINCH! Lose all progress and gifts scatter again
        found = 0;
        document.getElementById('found').textContent = '0';
        message.textContent = "GRINCH! All gifts stolen & scattered!";
        timer -= 15; // extra time penalty
        if (timer < 0) timer = 0;

        // Respawn everything in new positions
        gifts.forEach(gift => {
          gift.collected = false;
          gift.x = 100 + Math.random() * 800;
          gift.y = 100 + Math.random() * 400;
        });
      } else {
        g.collected = true;
        found++;
        document.getElementById('found').textContent = found;

        if (found === 20) {
          clearInterval(timerInterval);
          cancelAnimationFrame(animationFrame);
          if (level === 10) {
            message.textContent = "YOU WIN CHRISTMAS! ğŸ‰ All 200 gifts saved!";
            document.querySelector('button').style.display = 'block';
            document.querySelector('button').textContent = 'Play Again';
          } else {
            message.textContent = `Level ${level} Complete! Get ready...`;
            setTimeout(() => {
              level++;
              startLevel();
            }, 2500);
          }
        }
      }
      draw();
      break;
    }
  }
});
</script>
</body>
</html>
