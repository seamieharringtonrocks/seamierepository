<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Christmas Gift Hunt 2025</title>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<style>
  body,html{margin:0;height:100%;overflow:hidden;background:#fff;font-family:Arial}
  canvas{display:block}
  #ui{position:fixed;inset:0;pointer-events:none;color:#000;text-shadow:0 0 8px #fff;z-index:2}
  #timer,#gifts{position:fixed;top:15px;padding:12px 20px;background:rgba(255,255,255,.8);border-radius:15px;font-size:24px}
  #timer{right:15px}#gifts{left:15px}
  #levelName{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:rgba(255,255,255,.9);padding:10px 30px;border-radius:25px;font-size:30px}
  #start,#gameOver,#levelSelect{position:fixed;inset:0;background:#fff;color:#000;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;z-index:10}
  button{margin:20px;padding:18px 60px;font-size:30px;background:#000;color:#fff;border:none;border-radius:18px;cursor:pointer}
  button:active{background:#333}
  .card{background:#000;color:#fff;padding:30px;margin:12px;border-radius:25px;cursor:pointer;min-width:180px}
  .card.locked{opacity:.4}
</style>
</head>
<body>

<canvas id="c"></canvas>

<div id="ui">
  <div id="timer">Time: 0s</div>
  <div id="gifts">Gifts: 0/20</div>
  <div id="levelName"></div>
</div>

<div id="start">
  <h1 style="font-size:72px;font-weight:bold;color:#000">slack</h1>
  <button id="playBtn">PLAY NOW</button>
</div>

<div id="levelSelect" style="display:none"></div>

<div id="gameOver" style="display:none">
  <h1 id="result"></h1>
  <p id="scoreText" style="font-size:34px"></p>
  <button onclick="shareResult()">Share</button>
  <button onclick="showLevelSelect()">Levels</button>
  <button onclick="location.reload()">Again</button>
</div>

<audio id="music" loop></audio>

<script>
const levels = [
  {name:"Level 1",time:45,grinches:0,bg:"#ffffff"},
  {name:"Level 2",time:42,grinches:0,bg:"#ffffff"},
  {name:"Level 3",time:40,grinches:3,bg:"#ffffff"},
  {name:"Level 4",time:38,grinches:5,bg:"#ffffff"},
  {name:"Level 5",time:36,grinches:7,bg:"#ffffff"},
  {name:"Level 6",time:34,grinches:10,bg:"#ffffff"},
  {name:"Level 7",time:32,grinches:14,bg:"#ffffff"},
  {name:"Level 8",time:30,grinches:20,bg:"#ffffff"},
  {name:"Level 9",time:28,grinches:28,bg:"#ffffff"},
  {name:"Level 10",time:25,grinches:40,bg:"#ffffff"}
];

let c = document.getElementById("c");
let ctx = c.getContext("2d");
let music = document.getElementById("music");
let currentLevel = 0, giftsFound = 0, timeLeft = 0, objects = [];
let unlocked = +(localStorage.getItem("xmas2025") || 0);
let raf;

function resize(){c.width=innerWidth;c.height=innerHeight}
window.onresize=resize; resize();

class Gift{
  constructor(){this.x=80+Math.random()*(c.width-160);this.y=80+Math.random()*(c.height-160);this.size=70+Math.random()*30}
  draw(){ctx.fillStyle="#000";ctx.font="bold 30px Arial";ctx.textAlign="center";ctx.textBaseline="middle";ctx.fillText("slack",this.x,this.y)}
}

class Grinch{
  constructor(){this.x=80+Math.random()*(c.width-160);this.y=80+Math.random()*(c.height-160);this.size=80+Math.random()*40}
  draw(){ctx.fillStyle="#006400";ctx.font="bold 35px Arial";ctx.textAlign="center";ctx.textBaseline="middle";ctx.fillText("GRINCH",this.x,this.y)}
}

function spawn(){objects=[];for(let i=0;i<20;i++)objects.push(new Gift());for(let i=0;i<levels[currentLevel].grinches;i++)objects.push(new Grinch())}
function draw(){ctx.fillStyle=levels[currentLevel].bg;ctx.fillRect(0,0,c.width,c.height);objects.forEach(o=>o.draw());document.getElementById("timer").textContent=`Time: ${Math.ceil(timeLeft)}s`;document.getElementById("gifts").textContent=`Gifts: ${giftsFound}/20`;document.getElementById("levelName").textContent=levels[currentLevel].name}
function loop(){timeLeft-=1/60;if(timeLeft<=0)return gameOver(false);draw();raf=requestAnimationFrame(loop)}

c.onclick=c.ontouchstart=e=>{e.preventDefault();let r=c.getBoundingClientRect();let x=(e.touches?.[0].clientX||e.clientX)-r.left;let y=(e.touches?.[0].clientY||e.clientY)-r.top;for(let i=objects.length-1;i>=0;i--){let o=objects[i];if(Math.hypot(o.x-x,o.y-y)<o.size/2){if(o instanceof Gift){giftsFound++;objects.splice(i,1);if(giftsFound>=20)gameOver(true)}else{giftsFound=0;spawn();ctx.fillStyle="rgba(200,0,0,.6)";ctx.fillRect(0,0,c.width,c.height)}break}}};

function startLevel(i){currentLevel=i;giftsFound=0;timeLeft=levels[i].time;spawn();music.src="";music.play().catch(()=>{});document.getElementById("start").style.display="none";document.getElementById("levelSelect").style.display="none";document.getElementById("gameOver").style.display="none";cancelAnimationFrame(raf);draw();loop()}

function gameOver(win){cancelAnimationFrame(raf);music.pause();let score=win?Math.floor(timeLeft*5432):0;document.getElementById("result").innerHTML=win?`Level ${currentLevel+1} Complete!`:"Time Out!";document.getElementById("scoreText").textContent=win?`Score: ${score.toLocaleString()} points`:"";if(win&&currentLevel+1>unlocked){unlocked=currentLevel+1;localStorage.setItem("xmas2025",unlocked)}document.getElementById("gameOver").style.display="flex"}

function showLevelSelect(){document.getElementById("start").style.display="none";let sel=document.getElementById("levelSelect");sel.innerHTML=`<h1 style="font-size:50px;margin:30px;color:#000">Choose Level</h1><div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(170px,1fr));gap:15px;padding:20px;max-width:1000px;overflow:auto"></div><button onclick="location.reload()" style="margin-top:30px;background:#000;color:#fff">Back</button>`;let grid=sel.querySelector("div");levels.forEach((lvl,i)=>{let card=document.createElement("div");card.className="card"+(i>unlocked?" locked":"");card.innerHTML=`<div style="font-size:44px;font-weight:bold;color:#fff">${i+1}</div>${lvl.name}<br><small>${lvl.time}s â€¢ ${lvl.grinches} Grinches</small>`;card.onclick=()=>startLevel(i);grid.appendChild(card)});sel.style.display="flex"}

document.getElementById("playBtn").addEventListener("click", showLevelSelect);
</script>
</body>
</html>
