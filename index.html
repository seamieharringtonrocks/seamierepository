<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Christmas Gift Hunt - 10 Levels of Timed Chaos</title>
<style>
  body {
    margin: 0;
    background: #000;
    color: #fff;
    font-family: Arial, sans-serif;
    text-align: center;
  }
  h1 { margin: 20px; font-size: 2.5em; }
  #ui {
    padding: 10px;
    font-size: 1.4em;
    background: rgba(0,0,0,0.6);
    position: absolute;
    top: 0; left: 0; right: 0;
    display: flex;
    justify-content: center;
    gap: 30px;
    flex-wrap: wrap;
  }
  canvas {
    display: block;
    margin: 0 auto;
    border: 4px solid #0f0;
    border-radius: 12px;
    box-shadow: 0 0 30px #0f0;
  }
  #message {
    margin: 20px;
    font-size: 2em;
    font-weight: bold;
    min-height: 60px;
  }
  button {
    padding: 12px 24px;
    font-size: 1.2em;
    background: #d32f2f;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
  }
  button:hover { background: #ff1744; }
</style>
</head>
<body>
  <h1>Christmas Gift Hunt</h1>
  <div id="ui">
    <div>Level: <span id="level">1</span>/10</div>
    <div>Gifts Found: <span id="found">0</span>/20</div>
    <div>Time Left: <span id="timer">30</span>s</div>
  </div>
  <canvas id="canvas" width="1000" height="600"></canvas>
  <div id="message">Click Start to begin the holiday madness!</div>
  <button onclick="startGame()">Start Game</button>

<script>
// Everything is 100% self-contained â€” no external images, no links, no server needed.

const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
const giftEmojis = ['ğŸ','ğŸ§¦','ğŸ§¸','ğŸ“š','ğŸ®','ğŸš€','ğŸ§£','ğŸ§','ğŸ«','ğŸ§©','ğŸ¤–','ğŸš','ğŸ–ï¸','ğŸ¨','ğŸ¥','ğŸ¸','ğŸ§¤','ğŸ“±','âŒš','ğŸ§­'];

let level = 1;
let found = 0;
let timer = 30;
let timerInterval;
let animationFrame;
let gifts = [];
let snowflakes = [];
let message = document.getElementById('message');

const levelNames = [
  "", // index 0 unused
  "North Pole Classic",
  "New York Rooftop Snow",
  "German Christmas Market",
  "Swedish Lucia Night",
  "Mexican Posada Party",
  "Australian Beach Christmas",
  "Brazilian Tropical NoÃ«l",
  "Japanese Strawberry Cake",
  "Philippine Parol Lanterns",
  "Global Holiday Finale"
];

function startGame() {
  level = 1;
  message.textContent = "Find the 20 gifts before time runs out!";
  document.querySelector('button').style.display = 'none';
  startLevel();
}

function startLevel() {
  found = 0;
  document.getElementById('found').textContent = '0';
  document.getElementById('level').textContent = level + " â€” " + levelNames[level];

  // Timer: max 30s â†’ 5s
  timer = Math.max(5, 35 - (level * 5));

  document.getElementById('timer').textContent = timer;

  const grinchCount = Math.min(level + 1, 8);

  gifts = [];
  for (let i = 0; i < 20 + grinchCount; i++) {
    gifts.push({
      x: 100 + Math.random() * 800,
      y: 100 + Math.random() * 400,
      emoji: giftEmojis[Math.floor(Math.random() * giftEmojis.length)],
      isGrinch: i < grinchCount,
      collected: false
    });
  }

  gifts.sort(() => Math.random() - 0.5);

  // No snow on tropical/warm levels
  snowflakes = [];
  if (![5,6,7,9].includes(level)) {
    for (let i = 0; i < 120; i++) {
      snowflakes.push({
        x: Math.random() * 1000,
        y: Math.random() * 600,
        speed: 0.5 + Math.random() * 1.5,
        size: 10 + Math.random() * 20
      });
    }
  }

  clearInterval(timerInterval);
  timerInterval = setInterval(() => {
    timer--;
    document.getElementById('timer').textContent = timer;
    if (timer <= 0) {
      clearInterval(timerInterval);
      message.textContent = "Time's Up! Click canvas to retry level.";
    }
  }, 1000);

  draw();
  loop();
}

function drawBackground() {
  const grad = ctx.createLinearGradient(0, 0, 0, 600);

  // Sky & ground per theme
  if (level === 6 || level === 7) {
    grad.addColorStop(0, '#87CEEB');
    grad.addColorStop(1, '#FFD700');
    ctx.fillStyle = '#FFE4B5'; // sand
  } else if (level === 5) {
    grad.addColorStop(0, '#FF1493');
    grad.addColorStop(1, '#00CED1');
    ctx.fillStyle = '#ffffff';
  } else {
    grad.addColorStop(0, '#001133');
    grad.addColorStop(1, '#003366');
    ctx.fillStyle = '#ffffff';
  }
  ctx.fillStyle = grad;
  ctx.fillRect(0, 0, 1000, 600);

  ctx.fillStyle = (level === 6 || level === 7) ? '#FFE4B5' : '#ffffff';
  ctx.fillRect(0, 450, 1000, 150);

  // Level-specific decorations (emoji scenery)
  const dec = [];

  if (level === 1) { // North Pole
    dec.push({e:'ğŸ…',x:460,y:320,size:140});
    dec.push({e:'ğŸ¦Œ',x:620,y:520,size:90});
    dec.push({e:'ğŸ¦Œ',x:340,y:520,size:90});
    dec.push({e:'ğŸ›·',x:180,y:540,size:100});
    dec.push({e:'ğŸŒŒ',x:500,y:80,size:160});
  }
  else if (level === 2) { // New York Rooftop
    dec.push({e:'ğŸ—½',x:750,y:520,size:120});
    dec.push({e:'ğŸš•',x:220,y:560,size:80});
    dec.push({e:'ğŸš•',x:780,y:560,size:80});
    dec.push({e:'ğŸŒ†',x:500,y:280,size:200});
    dec.push({e:'ğŸŒ‰',x:140,y:420,size:110});
  }
  else if (level === 3) { // German Market
    dec.push({e:'ğŸ¥¨',x:200,y:520,size:100});
    dec.push({e:'ğŸ¥¨',x:800,y:520,size:100});
    dec.push({e:'ğŸº',x:380,y:540,size:90});
    dec.push({e:'ğŸ·',x:620,y:540,size:90});
    dec.push({e:'ğŸ„',x:500,y:380,size:180});
    dec.push({e:'ğŸ””',x:500,y:180,size:80});
  }
  else if (level === 4) { // Swedish Lucia
    dec.push({e:'ğŸ•¯ï¸',x:200,y:520,size:100});
    dec.push({e:'ğŸ•¯ï¸',x:320,y:500,size:100});
    dec.push({e:'ğŸ•¯ï¸',x:440,y:520,size:100});
    dec.push({e:'ğŸ•¯ï¸',x:560,y:500,size:100});
    dec.push({e:'ğŸ•¯ï¸',x:680,y:520,size:100});
    dec.push({e:'ğŸ•¯ï¸',x:800,y:520,size:100});
    dec.push({e:'â­',x:500,y:140,size:140});
    dec.push({e:'ğŸ‘¼',x:500,y:340,size:120});
  }
  else if (level === 5) { // Mexican Posada
    dec.push({e:'ğŸª…',x:500,y:180,size:160});
    dec.push({e:'ğŸ‰',x:200,y:320,size:120});
    dec.push({e:'ğŸ‰',x:800,y:320,size:120});
    dec.push({e:'ğŸŒ¶ï¸',x:300,y:540,size:90});
    dec.push({e:'ğŸŒ¶ï¸',x:700,y:540,size:90});
    dec.push({e:'ğŸŒ¸',x:500,y:520,size:100});
  }
  else if (level === 6) { // Australian Beach
    dec.push({e:'ğŸŒ',x:820,y:100,size:140});
    dec.push({e:'ğŸ„',x:300,y:520,size:110});
    dec.push({e:'ğŸ¦˜',x:680,y:520,size:130});
    dec.push({e:'ğŸ¤',x:500,y:560,size:100}); // prawn on the barbie
    dec.push({e:'ğŸ–ï¸',x:140,y:540,size:100});
  }
  else if (level === 7) { // Brazilian Tropical
    dec.push({e:'ğŸŒ´',x:180,y:380,size:180});
    dec.push({e:'ğŸŒ´',x:820,y:400,size:180});
    dec.push({e:'ğŸ¦œ',x:500,y:160,size:120});
    dec.push({e:'ğŸ¶',x:380,y:300,size:100});
    dec.push({e:'ğŸ¶',x:620,y:300,size:100});
    dec.push({e:'ğŸ–ï¸',x:500,y:560,size:110});
  }
  else if (level === 8) { // Japanese Strawberry Cake
    dec.push({e:'ğŸ°',x:500,y:380,size:200});
    dec.push({e:'ğŸ“',x:380,y:280,size:90});
    dec.push({e:'ğŸ“',x:620,y:280,size:90});
    dec.push({e:'ğŸ“',x:470,y:320,size:80});
    dec.push({e:'ğŸ“',x:530,y:320,size:80});
    dec.push({e:'â›„',x:200,y:520,size:110});
    dec.push({e:'ğŸ…',x:800,y:520,size:110});
  }
  else if (level === 9) { // Philippine Parol
    dec.push({e:'â­',x:300,y:180,size:160,color:'#FF0000'});
    dec.push({e:'â­',x:500,y:120,size:200,color:'#FFFF00'});
    dec.push({e:'â­',x:700,y:180,size:160,color:'#00FF00'});
    dec.push({e:'ğŸ®',x:200,y:420,size:130});
    dec.push({e:'ğŸ®',x:800,y:420,size:130});
    dec.push({e:'ğŸ„',x:500,y:480,size:140});
  }
  else if (level === 10) { // Global Finale
    dec.push({e:'ğŸŒ',x:500,y:320,size:240});
    dec.push({e:'ğŸ†',x:200,y:160,size:160});
    dec.push({e:'ğŸ†',x:800,y:160,size:160});
    dec.push({e:'ğŸ‰',x:340,y:520,size:130});
    dec.push({e:'ğŸ‰',x:660,y:520,size:130});
    dec.push({e:'ğŸ¥³',x:500,y:500,size:140});
  }

  dec.forEach(d => {
    ctx.font = `${d.size || 100}px serif`;
    ctx.fillStyle = d.color || '#ffffff';
    ctx.fillText(d.e, d.x, d.y);
  });
}

function draw() {
  ctx.clearRect(0, 0, 1000, 600);
  drawBackground();

  // Snow / sparkles
  snowflakes.forEach(s => {
    ctx.font = s.size + 'px serif';
    ctx.fillStyle = 'rgba(255,255,255,0.9)';
    ctx.fillText('â„', s.x, s.y);
    s.y += s.speed;
    if (s.y > 600) s.y = -20;
  });

  // Gifts
  gifts.forEach(g => {
    if (!g.collected) {
      ctx.font = '60px serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';

      // Normal gift
      ctx.fillStyle = '#ffffff';
      ctx.fillText(g.emoji, g.x, g.y);

      // Grinch = subtle static green hue overlay (no ring)
      if (g.isGrinch) {
        ctx.globalAlpha = 0.25;
        ctx.fillStyle = '#00ff00';
        ctx.fillText(g.emoji, g.x, g.y);
        ctx.globalAlpha = 1;
      }
    }
  });
}

function loop() {
  draw();
  animationFrame = requestAnimationFrame(loop);
}

canvas.addEventListener('click', (e) => {
  if (timer <= 0) {
    startLevel();
    return;
  }

  const rect = canvas.getBoundingClientRect();
  const mx = e.clientX - rect.left;
  const my = e.clientY - rect.top;

  for (const g of gifts) {
    if (!g.collected && Math.hypot(mx - g.x, my - g.y) < 50) {
      if (g.isGrinch) {
        found = 0;
        document.getElementById('found').textContent = '0';
        message.textContent = "GRINCH! All gifts stolen & scattered!";
        timer -= 15;
        if (timer < 0) timer = 0;

        gifts.forEach(gift => {
          gift.collected = false;
          gift.x = 100 + Math.random() * 800;
          gift.y = 100 + Math.random() * 400;
        });
      } else {
        g.collected = true;
        found++;
        document.getElementById('found').textContent = found;

        if (found === 20) {
          clearInterval(timerInterval);
          cancelAnimationFrame(animationFrame);
          if (level === 10) {
            message.textContent = "YOU WIN CHRISTMAS! ğŸ‰ All 200 gifts saved!";
            document.querySelector('button').style.display = 'block';
            document.querySelector('button').textContent = 'Play Again';
          } else {
            message.textContent = `Level ${level} Complete! Get ready...`;
            setTimeout(() => {
              level++;
              startLevel();
            }, 2500);
          }
        }
      }
      draw();
      break;
    }
  }
});
</script>
</body>
</html>
